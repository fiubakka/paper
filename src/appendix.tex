% En caso de ser necesario agregar toda información relevante en uno o varios anexos.

\subsubsection{Controles del jugador}

\noindent Los controles del jugador dentro del juego son los siguientes:

\label{ref:game-controls}
\begin{longtable}{|l|l|}
    \hline
    \textbf{Input} & \textbf{Control}\\
    \hline
    Teclas direccionales & Movimiento del jugador en el mapa \\
    WASD                 &  \\
    \hline
    I                    & Abrir/cerrar el inventario \\
    \hline
    E                    & Interactuar con un NPC (estando cerca del mismo) \\
    \hline
    TAB                  & Abrir/cerrar la ventana de chat \\
    \hline
    ESC                    & Abrir/cerrar menú de opciones \\
    \hline
    Click derecho sobre otro jugador & Abrir submenú de Truco \\
    \hline
    \caption{Controles del juego}\\
\end{longtable}

\subsubsection{Mensajes de Protocol Buffers}

\noindent A continuación listamos todos los mensajes \textit{protobuf} definidos
en la comunicación entre el cliente y el servidor:

\label{apendix:protobuf}
\begin{longtable}{|p{0.35\textwidth}|p{0.45\textwidth}|p{0.1\textwidth}|}
    \hline
    \textbf{Mensaje} & \textbf{Atributos} & \textbf{Origen} \\ \hline
    \endfirsthead
    \hline
    \textbf{Mensaje} & \textbf{Atributos} & \textbf{Origen} \\\hline
    \endhead
    \hline
    \endfoot
    \hline
    \endlastfoot
    
    \hline
    PBPlayerMovement & required float x & Cliente \\
                        & required float y & \\
    \hline
    PBPlayerVelocity & required float x & Cliente \\
                        & required float y & \\
    \hline
    PBPlayerPosition & required PBPlayerVelocity velocity & Cliente \\
                        & required PBPlayerPosition position & \\
    \hline
    PBPlayerChangeMap & required int32 new\_map\_id & Cliente \\
    \hline
    PBPlayerMessage & required string content & Cliente \\
    \hline
    PBPlayerLogin & required string username & Cliente \\
                    & required string password & \\
    \hline
    PBPlayerRegister & required string username & Cliente \\
                        & required string password & \\
                        & required PBPlayerEquipment equipment & \\
    \hline
    PBPlayerEquipment & required int32 hat & Cliente \\
                        & required int32 hair & \\
                        & required int32 eyes & \\
                        & required int32 glasses & \\
                        & required int32 facial\_hair & \\
                        & required int32 body & \\
                        & required int32 outfit & \\
    \hline
    PBNewInventoryItem & required uint32 id & Cliente \\
                        & required PBItemType type & \\
    \hline
    PBPlayerUpdateEquipment & required int32 hat & Cliente \\
                            & required int32 hair & \\
                            & required int32 eyes & \\
                            & required int32 glasses & \\
                            & required int32 facial\_hair & \\
                            & required int32 body & \\
                            & required int32 outfit & \\
    \hline
    PBClientMetadata & required uint32 length & Cliente \\
                        & required PBClientMessageType type & \\
    \hline
    PBTrucoAckPlay & required int32 playId & Cliente \\
    \hline
    PBTrucoDisconnect &  & Cliente \\
    \hline
    PBTrucoMatchChallengeReply & required string opponent\_username & Cliente \\
                                & required PBTrucoMatchChallengeReplyEnum status & \\
    \hline
    PBTrucoMatchChallenge & required string opponent\_username & Cliente \\
    \hline
    PBTrucoPlay & required int32 playId & Cliente \\
                & required PBTrucoPlayType playType & \\
                & optional int32 card & \\
                & optional PBTrucoShout shout & \\
    \hline
    PBServerMetadata & required uint32 length & Servidor \\
                        & required PBServerMessageType type & \\
    \hline
    PBPlayerMessage & required string entityId & Servidor \\
                    & required string content & \\
    \hline
    PBPlayerInitError & required string error\_code & Servidor \\
    \hline
    PBPlayerInitSuccess & required PBPlayerInitialState initialState & Servidor \\
    \hline
    PBPlayerInitialState & required PBPlayerPosition position & Servidor \\
                            & required PBPlayerEquipment equipment & \\
                            & required int32 mapId & \\
    \hline
    PBPlayerPosition & required float x & Servidor \\
                        & required float y & \\
    \hline
    PBPlayerEquipment & required int32 hat & Servidor \\
                        & required int32 hair & \\
                        & required int32 eyes & \\
                        & required int32 glasses & \\
                        & required int32 facial\_hair & \\
                        & required int32 body & \\
                        & required int32 outfit & \\
    \hline
    PBInventoryItem & required uint32 id & Servidor \\
                    & required PBInventoryItemType type & \\
    \hline
    PBInventoryItemList & repeated PBInventoryItem items & Servidor \\
    \hline
    PBPlayerChangeMapReady & required int32 new\_map\_id & Servidor \\
    \hline
    PBGameEntityDisconnect & required string entityId & Servidor \\
    \hline
    PBGameEntityState & required string entityId & Servidor \\
                        & required PBGameEntityPosition position & \\
                        & required PBGameEntityVelocity velocity & \\
                        & required PBGameEntityEquipment equipment & \\
                        & optional PBGameEntityMetrics metrics & \\
    \hline
    PBGameEntityPosition & required float x & Servidor \\
                            & required float y & \\
    \hline
    PBGameEntityVelocity & required float x & Servidor \\
                            & required float y & \\
    \hline
    PBGameEntityEquipment & required int32 hat & Servidor \\
                            & required int32 hair & \\
                            & required int32 eyes & \\
                            & required int32 glasses & \\
                            & required int32 facial\_hair & \\
                            & required int32 body & \\
                            & required int32 outfit & \\
    \hline
    PBGameEntityMetrics & required string nodeId & Servidor \\
                        & required float messageRatePerSecond & \\
    \hline
    PBTrucoAllowPlay & required int32 playId & Servidor \\
    \hline
    PBTrucoMatchChallengeDenied & required string opponent\_username & Servidor \\
    \hline
    PBTrucoMatchChallengeRequest & required string opponent\_username & Servidor \\
    \hline
    PBTrucoPlay & required int32 playId & Servidor \\
                & required PBTrucoPlayType playType & \\
                & repeated PBTrucoCard playerCards & \\
                & required int32 opponentCardAmount & \\
                & required PBTrucoPoints firstPlayerPoints & \\
                & required PBTrucoPoints secondPlayerPoints & \\
                & required bool isGameOver & \\
                & required bool isMatchOver & \\
                & optional PBTrucoCard card & \\
                & optional PBTrucoShout shout & \\
                & optional PBTrucoNextPlay nextPlayInfo & \\
    \hline
    PBTrucoNextPlay & required string nextPlayer & Servidor \\
                    & required bool isPlayCardAvailable & \\
                    & repeated PBTrucoShout availableShouts & \\
    \hline
    PBTrucoCard & required int32 cardId & Servidor \\
                & required PBTrucoCardSuit suit & \\
                & required int32 number & \\
    \hline
    PBTrucoPoints & required string playerName & Servidor \\
                    & required int32 points & \\
    \hline
    PBTrucoDisconnectAck &  & Servidor \\
    \hline
\caption{Mensajes Protobuf entre el cliente y servidor} \\
\end{longtable}

\begin{longtable}{|p{0.3\textwidth}|p{0.40\textwidth}|p{0.2\textwidth}|}
    \hline
    \textbf{Nombre} & \textbf{Valores} & \textbf{Usado en} \\ \hline
    \endfirsthead
    \hline
    \textbf{Nombre} & \textbf{Valores} & \textbf{Usado en} \\\hline
    \endhead
    \hline
    \endfoot
    \hline
    \endlastfoot

    \hline
    PBClientMessageType & PBPlayerLogin = 0 & PBClientMetadata \\
                        & PBPlayerRegister = 1 & \\
                        & PBPlayerMovement = 2 & \\
                        & PBPlayerMessage = 3 & \\
                        & PBPlayerChangeMap = 4 & \\
                        & PBPlayerUpdateEquipment = 5 & \\
                        & PBTrucoMatchChallenge = 6 & \\
                        & PBTrucoMatchChallengeReply = 7 & \\
                        & PBTrucoPlay = 8 & \\
                        & PBTrucoPlayAck = 9 & \\
                        & PBTrucoDisconnect = 10 & \\
    \hline
    PBItemType & hair = 0 & PBINewnventory- \\
                & outfit = 1 & Item \\
                & facial\_hair = 2 & \\
                & glases = 3 & \\
                & hats = 4 & \\
    \hline
    PBTrucoMatchChallenge- & ACCEPTED = 0 & PBTrucoMatch- \\
    ReplyEnum               & REJECTED = 1 & ChallengeReply \\
    \hline
    PBTrucoPlayType & CARD = 0 & PBTrucoPlay \\
                    & SHOUT = 1 & \\
                    & UPDATE = 2 & \\
    \hline
    PBTrucoShout & ENVIDO = 0 & PBTrucoPlay \\
                    & REAL\_ENVIDO = 1 & \\
                    & FALTA\_ENVIDO = 2 & \\
                    & ENVIDO\_QUIERO = 3 & \\
                    & ENVIDO\_NO\_QUIERO = 4 & \\
                    & TRUCO = 5 & \\
                    & RETRUCO = 6 & \\
                    & VALE\_CUATRO = 7 & \\
                    & TRUCO\_QUIERO = 8 & \\
                    & TRUCO\_NO\_QUIERO = 9 & \\
                    & MAZO = 10 & \\
    \hline
    PBServerMessageType & PBGameEntityState = 0 & PBServerMetadata \\
                        & PBPlayerMessage = 1 & \\
                        & PBPlayerInitError = 2 & \\
                        & PBPlayerInitSuccess = 3 & \\
                        & PBPlayerChangeMapReady = 4 & \\
                        & PBGameEntityDisconnect = 5 & \\
                        & PBTrucoMatchChallengeRequest = 6 & \\
                        & PBTrucoMatchChallengeDenied = 7 & \\
                        & PBTrucoPlay = 8 & \\
                        & PBTrucoAllowPlay = 9 & \\
    \hline
    PBPlayerInitErrorCode & UNKNOWN = 0 & PBPlayerInitError \\
                            & INVALID\_PLAYER\_CREDENTIALS = 1 & \\
                            & PLAYER\_ALREADY\_EXISTS = 2 & \\
    \hline
    PBInventoryItemType & hair = 0 & PBInventoryItem \\
                        & outfit = 1 & \\
                        & facial\_hair = 2 & \\
                        & glases = 3 & \\
                        & hats = 4 & \\
    \hline
    PBTrucoPlayType & CARD = 0 & PBTrucoPlay \\
                    & SHOUT = 1 & \\
                    & UPDATE = 2 & \\
    \hline
    PBTrucoCardSuit & CUPS = 0 & PBTrucoCard \\
                    & SWORDS = 1 & \\
                    & COINS = 2 & \\
                    & CLUBS = 3 & \\
    \hline
    PBTrucoShout & ENVIDO = 0 & PBTrucoPlay \\
                    & REAL\_ENVIDO = 1 & \\
                    & FALTA\_ENVIDO = 2 & \\
                    & ENVIDO\_QUIERO = 3 & \\
                    & ENVIDO\_NO\_QUIERO = 4 & \\
                    & TRUCO = 5 & \\
                    & RETRUCO = 6 & \\
                    & VALE\_CUATRO = 7 & \\
                    & TRUCO\_QUIERO = 8 & \\
                    & TRUCO\_NO\_QUIERO = 9 & \\
                    & MAZO = 10 & \\
    \hline
    \caption{Enums Protobuf}\\
\end{longtable}